# 宿題2：大規模データベースで木構造が使われる理由は何か
## 1. データがどんどん増加していくから
* 木構造
    * データが増え続けても同じ方法で追加出来る
    * データが増えても検索効率が落ちにくい？？
* ハッシュテーブル
    * データが増え続けるとハッシュテーブルの組み換えが必要になる
    * データが増えるとハッシュ値がかぶりやすくなり検索効率が線形リストと同じになってしまう

## 2. データのバリエーションが多いから
* ハッシュテーブル
    * ハッシュテーブルで検索効率を上げようとするとデータのバリエーションに合わせてハッシュ値が必要なので多くのメモリが必要になってしまう。
    * 検索効率を保つとデータがスカスカになり、無駄になるメモリも多い。
* 木構造
    * B Treeを使えば、ブランチノードの持つインデックス値の数を少し増やすだけで木の深さが浅くなり検索効率を保つことができる

## 3. データ数の見積もりが立たないことが多いから
* ハッシュテーブル
    * どれだけのデータが入るかわからないとハッシュ関数が定められない
* 木構造
    * データの入力に従ってデータを増やせる
    * 想定外に増えた場合も再構成がしやすい

## リサーチ
### インデックスについて
データの検索を効率化するために、テーブルの構造とは別に検索用のインデックスを作っておく。
idだけでなく、よく検索されるカラムや、データのバリエーションが多いカラム、外部キーになっているカラムにインデックスを作成しておくことでデータベースを検索する際の効率が上がる。 <br>
参考：https://kirohi.com/index_for_beginer#i-3 <br>
参考：https://www.dbonline.jp/sqlite/index/index1.html
### B Treeについて
B Treeは、授業で扱ったバランス木の一種で、ブランチノードには複数の値の配列を持っている。上位のノードの各インデックス値の子ノードには、その値と隣の値の間のインデックス値の配列を持っている。ブランチノードではこれが繰り返される。リーフノードには各レコードのデータが格納されている。

各ブランチノードに格納しているインデックス値の数を増やせば、木の深さを浅くすることができ、効率的に探索することができる。
そのため、木構造を用いたデータベースはB Treeがよく使われる。
隣のリーフノードとポインタでつなげることによってデータの連続的な参照を可能にしたB+Treeが実用的。 <br>
参考：https://use-the-index-luke.com/ja/sql/anatomy/the-tree
